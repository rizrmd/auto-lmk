{{define "home.html"}}
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - {{.TenantName}}</title>

    <!-- Enhanced SEO Meta Tags -->
    <meta name="description" content="{{.TenantName}} - Dealer mobil bekas terpercaya di Indonesia. Jual mobil berkualitas dengan harga terbaik, garansi mesin 1 tahun, test drive gratis, & proses kredit mudah. Temukan Toyota, Honda, Mitsubishi, dan lainnya dengan kondisi prima.">
    <meta name="keywords" content="dealer mobil bekas, jual mobil bekas, beli mobil berkualitas, mobil bekas terpercaya, {{.TenantName}}, Toyota bekas, Honda bekas, Mitsubishi bekas, mobil garansi, test drive mobil, kredit mobil bekas, mobil bekas dijual, harga mobil bekas, showroom mobil">
    <meta name="author" content="{{.TenantName}}">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large">
    <meta name="language" content="id-ID">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{.BaseURL}}/" />

    <!-- Enhanced Open Graph -->
    <meta property="og:title" content="{{.TenantName}} - Dealer Mobil Bekas Terpercaya | Jual & Beli Mobil Berkualitas">
    <meta property="og:description" content="Dealer mobil bekas terpercaya dengan koleksi Toyota, Honda, Mitsubishi berkualitas. Garansi mesin 1 tahun, test drive gratis, & proses kredit mudah. Temukan mobil impian Anda sekarang!">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{.TenantName}}">
    <meta property="og:locale" content="id_ID">
    <meta property="og:url" content="{{.BaseURL}}">
    <meta property="og:image" content="{{.LogoPath}}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{{.TenantName}} - Dealer Mobil Bekas Terpercaya">

    <!-- Enhanced Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{.TenantName}} - Dealer Mobil Bekas Terpercaya">
    <meta name="twitter:description" content="Jual & beli mobil bekas berkualitas dengan garansi 1 tahun. Test drive gratis & kredit mudah. Toyota, Honda, Mitsubishi tersedia!">
    <meta name="twitter:image" content="{{.LogoPath}}">
    <meta name="twitter:site" content="@{{.TwitterHandle | default "autolmk"}}">

    <!-- Local Business Meta Tags -->
    <meta name="geo.region" content="ID">
    <meta name="geo.placename" content="{{.ShowroomAddress | default "Indonesia"}}">
    <meta name="ICBM" content="{{.GeoCoordinates | default "-6.2088,106.8456"}}">
    <meta name="business:contact_data:street_address" content="{{.ShowroomAddress | default ""}}">
    <meta name="business:contact_data:locality" content="{{.TenantLocation | default "Indonesia"}}">
    <meta name="business:contact_data:country" content="Indonesia">
    {{if .ShowroomPhone}}<meta name="business:contact_data:phone_number" content="{{.ShowroomPhone}}">{{end}}
    {{if .ShowroomEmail}}<meta name="business:contact_data:email" content="{{.ShowroomEmail}}">{{end}}

    <!-- Favicon -->
    {{if .FaviconPath}}
    <link rel="icon" type="image/x-icon" href="{{.FaviconPath}}">
    {{end}}

    <!-- Tailwind CSS -->
    <link rel="stylesheet" href="/static/css/output.css">

    <!-- Basecoat UI -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.6/dist/basecoat.cdn.min.css">
    <script src="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.6/dist/js/all.min.js" defer></script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Alpine.js for interactivity -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        [x-cloak] { display: none !important; }
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>

    <!-- Organization Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{.TenantName}}",
        "url": "{{.BaseURL}}",
        "logo": "{{.LogoPath}}",
        "description": "Dealer mobil bekas terpercaya dengan koleksi mobil berkualitas dan harga terbaik di Indonesia",
        {{if .ShowroomAddress}}"address": {
            "@type": "PostalAddress",
            "streetAddress": "{{.ShowroomAddress}}",
            "addressLocality": "{{.TenantName}}",
            "addressCountry": "ID"
        },{{end}}
        {{if .ShowroomPhone}}"telephone": "{{.ShowroomPhone}}",{{end}}
        {{if .ShowroomEmail}}"email": "{{.ShowroomEmail}}",{{end}}
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "{{.WhatsAppNumber}}",
            "contactType": "customer service",
            "availableLanguage": ["Indonesian", "English"],
            "hoursAvailable": [
                "Mo-Sa 09:00-18:00",
                "Su 10:00-16:00"
            ]
        },
        "sameAs": [
            {{if .SocialMediaFacebook}}"https://facebook.com/{{.SocialMediaFacebook}}"{{end}},
            {{if .SocialMediaInstagram}}"https://instagram.com/{{.SocialMediaInstagram}}"{{end}},
            {{if .SocialMediaTwitter}}"https://twitter.com/{{.SocialMediaTwitter}}"{{end}}
        ],
        "areaServed": {
            "@type": "Country",
            "name": "Indonesia"
        },
        "founder": {
            "@type": "Person",
            "name": "{{.TenantName}} Founder"
        },
        "foundingDate": "2020",
        "numberOfEmployees": "11-50",
        "knowsLanguage": ["Indonesian", "English"],
        "legalName": "{{.TenantName}}",
        "taxID": "{{.TenantName}}",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Mobil Bekas Catalog",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Product",
                        "name": "Mobil Bekas"
                    },
                    "availability": "https://schema.org/InStock"
                }
            ]
        }
    }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation with Basecoat -->
    {{template "nav" .}}

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <div class="hero-gradient text-white section-lg">
            <div class="content-wrapper">
                <div class="text-center max-w-5xl mx-auto">
                    <h1>
                        Cari Mobil Impian Anda
                    </h1>
                    <p class="text-xl mb-8">
                        Jelajahi koleksi mobil bekas pilihan kami dengan kualitas terjamin
                    </p>

                    <!-- Enhanced Search Bar -->
                    <div class="search-container">
                        <form action="/mobil" method="get">
                            <svg class="search-icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            <input
                                type="text"
                                name="q"
                                placeholder="Cari merek, model, atau kode mobil..."
                                class="search-input"
                            >
                        </form>
                    </div>
                    </div>

                    <!-- Quick Filters -->
                    <div class="mt-8 flex flex-wrap justify-center gap-2">
                        <a href="/mobil" class="btn btn-outline btn-ghost text-white border-white hover:bg-white hover:text-purple-700">
                            Semua Mobil
                        </a>
                        <a href="/mobil?max_price=200000000" class="btn btn-outline btn-ghost text-white border-white hover:bg-white hover:text-purple-700">
                            Di Bawah 200 Juta
                        </a>
                        <a href="/mobil?transmission=AT" class="btn btn-outline btn-ghost text-white border-white hover:bg-white hover:text-purple-700">
                            Automatic
                        </a>
                        <a href="/mobil?transmission=MT" class="btn btn-outline btn-ghost text-white border-white hover:bg-white hover:text-purple-700">
                            Manual
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="card text-center">
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Kualitas Terjamin</h3>
                    <p class="text-gray-600">Setiap mobil diperiksa secara menyeluruh untuk ketenangan pikiran Anda</p>
                </div>

                <div class="card text-center">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Harga Terbaik</h3>
                    <p class="text-gray-600">Harga kompetitif dengan biaya transparan tanpa biaya tersembunyi</p>
                </div>

                <div class="card text-center">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">Pilihan Lengkap</h3>
                    <p class="text-gray-600">Beragam pilihan merek dan model untuk memenuhi kebutuhan Anda</p>
                </div>
            </div>
        </div>

        <!-- Featured Cars Section -->
        <div class="bg-white py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-gray-900">Mobil Pilihan</h2>
                        <p class="text-gray-600 mt-1">Koleksi terbaik dari kendaraan kami</p>
                    </div>
                    <a href="/mobil" class="btn btn-primary">Lihat Semua â†’</a>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="featured-cars">
                    <!-- Cars will be loaded via HTMX -->
                    <div class="text-center py-12 col-span-full">
                        <div class="spinner"></div>
                        <p class="text-gray-500 mt-4">Memuat mobil pilihan...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold mb-4">Siap Menemukan Mobil Impian Anda?</h2>
                <p class="text-lg mb-8 text-purple-100">Jelajahi koleksi lengkap kami atau hubungi kami untuk bantuan personal</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/mobil" class="btn bg-white text-purple-600 hover:bg-gray-100">
                        Lihat Semua Mobil
                    </a>
                    <a href="/kontak" class="btn btn-outline border-white text-white hover:bg-white hover:text-purple-600">
                        Hubungi Kami
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    {{template "footer" .}}

    <!-- WhatsApp Button -->
    {{template "whatsapp-button" .}}

    <!-- Load Featured Cars -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load featured cars via HTMX
            const featuredCarsContainer = document.getElementById('featured-cars');

            fetch('/api/cars?limit=6&featured=true')
                .then(response => response.json())
                .then(data => {
                    if (data.data && data.data.length > 0) {
                        displayFeaturedCars(data.data);
                    } else {
                        // Load all cars if no featured cars
                        fetch('/api/cars?limit=6')
                            .then(response => response.json())
                            .then(allData => {
                                if (allData.data) {
                                    displayFeaturedCars(allData.data);
                                } else {
                                    showNoCarsMessage();
                                }
                            });
                    }
                })
                .catch(error => {
                    console.error('Error loading featured cars:', error);
                    showNoCarsMessage();
                });

            function displayFeaturedCars(cars) {
                const html = cars.map(car => createCarCard(car)).join('');
                featuredCarsContainer.innerHTML = html;
            }

            function createCarCard(car) {
                const price = car.price ? new Intl.NumberFormat('id-ID', {
                    style: 'currency',
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(car.price) : 'Harga Negosiasi';

                return `
                    <div class="card hover:shadow-lg transition-shadow">
                        <div class="aspect-w-16 aspect-h-9 bg-gray-200 rounded-t-lg flex items-center justify-center">
                            <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                        </div>
                        <div class="p-4">
                            <h3 class="text-lg font-semibold text-gray-900">${car.brand} ${car.model}</h3>
                            <p class="text-2xl font-bold text-blue-600 mt-1">${price}</p>
                            <div class="flex gap-2 mt-2">
                                <span class="badge badge-info">${car.year}</span>
                                <span class="badge badge-secondary">${car.transmission}</span>
                            </div>
                            <a href="/mobil/${car.id}" class="btn btn-primary w-full mt-4">
                                Lihat Detail
                            </a>
                        </div>
                    </div>
                `;
            }

            function showNoCarsMessage() {
                featuredCarsContainer.innerHTML = `
                    <div class="text-center py-12 col-span-full">
                        <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                        <p class="text-gray-500">Belum ada mobil tersedia.</p>
                        <a href="/mobil" class="btn btn-primary mt-4">Lihat Semua Mobil</a>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
{{end}}